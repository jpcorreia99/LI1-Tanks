<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa3_2018li1g088</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Tarefa3_2018li1g088.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa3_2018li1g088</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Introdu&#231;&#227;o</a></li><li><a href="#g:2">Objetivos</a><ul><li><a href="#g:3">Fun&#231;&#245;es principais da Tarefa 3 (Compress&#227;o)</a><ul><li><a href="#g:4">Fun&#231;&#245;es de compress&#227;o do mapa</a><ul><li><a href="#g:5">Fun&#231;&#245;es auxiliares &#224; compress&#227;o do mapa</a></li></ul></li><li><a href="#g:6">Fun&#231;&#245;es de compress&#227;o de jogadores</a></li><li><a href="#g:7">Fun&#231;&#245;es de compress&#227;o de disparos</a><ul><li><a href="#g:8">Fun&#231;&#245;es auxiliares &#224; compress&#227;o de disparos</a></li></ul></li></ul></li><li><a href="#g:9">Fun&#231;&#245;es principais da Tarefa 3 (Descompress&#227;o)</a><ul><li><a href="#g:10">Fun&#231;&#245;es auxiliares &#224; separa&#231;&#227;o de strings</a></li><li><a href="#g:11">Fun&#231;&#245;es de  descompress&#227;o do mapa</a><ul><li><a href="#g:12">Fun&#231;&#245;es de aux&#237;lio &#224; descompress&#227;o do mapas</a></li></ul></li><li><a href="#g:13">Fun&#231;&#245;es de descompress&#227;o de jogadores</a></li><li><a href="#g:14">Fun&#231;&#245;es de descompress&#227;o de disparos</a></li></ul></li></ul></li><li><a href="#g:15">Discuss&#227;o e conclus&#227;o</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Este m&#243;dulo define fun&#231;&#245;es comuns da Tarefa 3 do trabalho pr&#225;tico.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:testesT3">testesT3</a> :: [<a href="LI11819.html#t:Estado">Estado</a>]</li><li class="src short"><a href="#v:comprime">comprime</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String</li><li class="src short"><a href="#v:comprime_mapa">comprime_mapa</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String</li><li class="src short"><a href="#v:melhora_string_pecas">melhora_string_pecas</a> :: [Char] -&gt; [Char]</li><li class="src short"><a href="#v:passa_parede_int">passa_parede_int</a> :: <a href="LI11819.html#t:Peca">Peca</a> -&gt; Int</li><li class="src short"><a href="#v:constroi_string_pecas">constroi_string_pecas</a> :: [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; [Char]</li><li class="src short"><a href="#v:mapa_borderless">mapa_borderless</a> :: <a href="LI11819.html#t:Mapa">Mapa</a> -&gt; <a href="LI11819.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:elimina_primeiro_ultimo_lista">elimina_primeiro_ultimo_lista</a> :: [a] -&gt; [a]</li><li class="src short"><a href="#v:comprime_jogadores">comprime_jogadores</a> :: [<a href="LI11819.html#t:Jogador">Jogador</a>] -&gt; String</li><li class="src short"><a href="#v:comprime_tres_valores">comprime_tres_valores</a> :: Int -&gt; Int -&gt; Int -&gt; Char</li><li class="src short"><a href="#v:comprime_disparos">comprime_disparos</a> :: [<a href="LI11819.html#t:Disparo">Disparo</a>] -&gt; String</li><li class="src short"><a href="#v:junta_disparo_string">junta_disparo_string</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; String</li><li class="src short"><a href="#v:passa_jogador_disparo_int">passa_jogador_disparo_int</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; Int</li><li class="src short"><a href="#v:passa_direcao_int">passa_direcao_int</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; Int</li><li class="src short"><a href="#v:descomprime">descomprime</a> :: String -&gt; <a href="LI11819.html#t:Estado">Estado</a></li><li class="src short"><a href="#v:parte_string">parte_string</a> :: String -&gt; (String, String)</li><li class="src short"><a href="#v:parte_string_jogadores_disparos">parte_string_jogadores_disparos</a> :: Char -&gt; String -&gt; (String, String)</li><li class="src short"><a href="#v:descomprime_mapa">descomprime_mapa</a> :: String -&gt; <a href="LI11819.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:reconstroi_mapa">reconstroi_mapa</a> :: [[<a href="LI11819.html#t:Peca">Peca</a>]] -&gt; <a href="LI11819.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:reverte_simplificacao">reverte_simplificacao</a> :: [Char] -&gt; String</li><li class="src short"><a href="#v:separa_lista_pecas">separa_lista_pecas</a> :: <a href="LI11819.html#t:Posicao">Posicao</a> -&gt; [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; [[<a href="LI11819.html#t:Peca">Peca</a>]]</li><li class="src short"><a href="#v:string_para_dimensoes">string_para_dimensoes</a> :: String -&gt; <a href="LI11819.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:converte_string_pecas">converte_string_pecas</a> :: String -&gt; [<a href="LI11819.html#t:Peca">Peca</a>]</li><li class="src short"><a href="#v:converte_char_peca">converte_char_peca</a> :: Char -&gt; [<a href="LI11819.html#t:Peca">Peca</a>]</li><li class="src short"><a href="#v:passa_int_parede">passa_int_parede</a> :: Int -&gt; <a href="LI11819.html#t:Peca">Peca</a></li><li class="src short"><a href="#v:descomprime_jogadores">descomprime_jogadores</a> :: String -&gt; [<a href="LI11819.html#t:Jogador">Jogador</a>]</li><li class="src short"><a href="#v:descomprime_tres_valores">descomprime_tres_valores</a> :: Char -&gt; (Int, Int, Int)</li><li class="src short"><a href="#v:descomprime_disparos">descomprime_disparos</a> :: String -&gt; [<a href="LI11819.html#t:Disparo">Disparo</a>]</li><li class="src short"><a href="#v:descomprime_disparo">descomprime_disparo</a> :: Char -&gt; <a href="LI11819.html#t:Disparo">Disparo</a></li><li class="src short"><a href="#v:retorna_info">retorna_info</a> :: Char -&gt; (Int, <a href="LI11819.html#t:Direcao">Direcao</a>, Int, Int)</li><li class="src short"><a href="#v:passa_int_direcao">passa_int_direcao</a> :: Int -&gt; <a href="LI11819.html#t:Direcao">Direcao</a></li><li class="src short"><a href="#v:passa_jogador_disparo">passa_jogador_disparo</a> :: Int -&gt; Int</li><li class="src short"><a href="#v:conclusao">conclusao</a> :: String</li></ul></div><div id="interface"><h1 id="g:1">Introdu&#231;&#227;o</h1><div class="top"><p class="src"><a id="v:testesT3" class="def">testesT3</a> :: [<a href="LI11819.html#t:Estado">Estado</a>] <a href="#v:testesT3" class="selflink">#</a></p><div class="doc"><p>Nesta Tarefa foi-nos colocado o objetivo de comprimir o <code><a href="LI11819.html#t:Estado">Estado</a></code> o mais poss&#237;vel sob a forma de uma string, sendo, posteriormente, poss&#237;vel descomprimir essa string sem que se perdesse informa&#231;&#227;o.</p><p>Nesta tarefa o maior desafio foi o de comprimir o mapa pois diferentes m&#233;todos teriam diferentes efic&#225;cias para diferentes tipos de mapas</p></div></div><h1 id="g:2">Objetivos</h1><h2 id="g:3">Fun&#231;&#245;es principais da Tarefa 3 (Compress&#227;o)</h2><div class="top"><p class="src"><a id="v:comprime" class="def">comprime</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String <a href="#v:comprime" class="selflink">#</a></p><div class="doc"><p>Comprime um <code><a href="LI11819.html#t:Estado">Estado</a></code> para formato textual.</p><p>A compress&#227;o ser&#225; dividida em tr&#234;s:</p><ul><li><strong>Compress&#227;o do <code><a href="LI11819.html#t:Mapa">Mapa</a></code></strong>: Ser&#225; usada a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:comprime_mapa">comprime_mapa</a></code></li><li><strong>Compress&#227;o dos <code><a href="LI11819.html#t:Jogador">Jogador</a></code>es</strong>: Ser&#225; usada a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:comprime_jogadores">comprime_jogadores</a></code></li><li><strong>Compressao dos <code><a href="LI11819.html#t:Disparo">Disparo</a></code>s</strong>: Ser&#225; usada a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:comprime_disparos">comprime_disparos</a></code></li></ul></div></div><h3 id="g:4">Fun&#231;&#245;es de compress&#227;o do mapa</h3><div class="top"><p class="src"><a id="v:comprime_mapa" class="def">comprime_mapa</a> :: <a href="LI11819.html#t:Estado">Estado</a> -&gt; String <a href="#v:comprime_mapa" class="selflink">#</a></p><div class="doc"><p>Dado um <code><a href="LI11819.html#t:Estado">Estado</a></code>, comprime o seu mapa, utilizando a fun&#231;&#227;o ord em que o sexto d&#237;gito de um caracter corresponde ao tipo de parede enquanto os restantes correspondem ao n&#250;mero de vezes que esse bloco aparece</p><p><strong>Passos da compress&#227;o do mapa</strong> :</p><ol><li>Colocar no primeiro caracter a informa&#231;&#227;o do n&#186; de jogadores no d&#237;gito das centenas de milhar, o n&#186; de linhas do mapa nas centenas e o n&#186; de colunas nas unidades</li><li>Retirar ao mapa as bordas usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:mapa_borderless">mapa_borderless</a></code></li><li>Transformar o mapa numa lista de pe&#231;as</li><li>Transformar essa lista de pe&#231;as em caracteres, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:constroi_string_pecas">constroi_string_pecas</a></code></li><li>Melhorar essa string que comprimiu as pe&#231;as, usando a fun&#231;&#227;o 'melhora_string_pe&#231;as'</li></ol><p><strong>Exemplos de compress&#227;o das pe&#231;as</strong>: </p><ul><li>\ 100017 corresponde a 17 <code><a href="LI11819.html#v:Vazia">Vazia</a></code></li><li>\ 200111 corresponde a 111 Bloco Indestrutivel </li><li>\ 400045 corresponde a 45 Vazias seguidas de um Bloco Indestrut&#237;vel </li></ul><p><strong>Nota</strong>: Cada caracter da compress&#227;o do mapa ter&#225; 6 digitos, isto ser&#225; importante para depois separar a string que comprime o mapa da string que comprime os jogadores, na qual cada caracter s&#243; ter&#225; 5 d&#237;gitos, isto &#233; feito para poupar caracteres de separa&#231;&#227;o da informa&#231;&#227;o</p></div></div><h4 id="g:5">Fun&#231;&#245;es auxiliares &#224; compress&#227;o do mapa</h4><div class="top"><p class="src"><a id="v:melhora_string_pecas" class="def">melhora_string_pecas</a> :: [Char] -&gt; [Char] <a href="#v:melhora_string_pecas" class="selflink">#</a></p><div class="doc"><p>Visto no mapa ocorrer bastantes vezes o caso de ap&#243;s x blocos vazios ocorrer um &#250;nico bloco Destrutivel ou Industrut&#237;vel, registou-se com um n&#250;mero esses casos
--
--  * 4xxxxx corresponde a xxxxx pe&#231;as vazias seguidas de um bloco Indestrut&#237;vel
--
--  * 5xxxxx corresponde a xxxxx pe&#231;as vazias seguidas de um bloco Destrut&#237;vel</p></div></div><div class="top"><p class="src"><a id="v:passa_parede_int" class="def">passa_parede_int</a> :: <a href="LI11819.html#t:Peca">Peca</a> -&gt; Int <a href="#v:passa_parede_int" class="selflink">#</a></p><div class="doc"><p>Faz corresponder uma pe&#231;a a um n&#250;mero que servir&#225; para simbolizar essa pe&#231;a</p></div></div><div class="top"><p class="src"><a id="v:constroi_string_pecas" class="def">constroi_string_pecas</a> :: [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; [Char] <a href="#v:constroi_string_pecas" class="selflink">#</a></p><div class="doc"><p>Ir&#225; percorrer uma lista onde se encontram todas as pe&#231;as do mapa e ir&#225; comprimi todas as pe&#231;as iguais e seguidas num &#250;nico d&#237;gito yxxxxx </p><ul><li><strong>y</strong> - digito correspondente ao caracter, atrav&#233;s da fun&#231;&#227;o passa_parede_int</li><li><strong>xxxx</strong> - n&#250;mero de pe&#231;as seguidas dessa pe&#231;a</li></ul></div></div><div class="top"><p class="src"><a id="v:mapa_borderless" class="def">mapa_borderless</a> :: <a href="LI11819.html#t:Mapa">Mapa</a> -&gt; <a href="LI11819.html#t:Mapa">Mapa</a> <a href="#v:mapa_borderless" class="selflink">#</a></p><div class="doc"><p>Retira as bordas da matriz para melhor compress&#227;o</p></div></div><div class="top"><p class="src"><a id="v:elimina_primeiro_ultimo_lista" class="def">elimina_primeiro_ultimo_lista</a> :: [a] -&gt; [a] <a href="#v:elimina_primeiro_ultimo_lista" class="selflink">#</a></p><div class="doc"><p>Dada uma lista devolve essa lista sem o primeiro e o &#250;ltimo elemento, servir&#225; como auxiliar ao retirar &#224; fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:mapa_borderless">mapa_borderless</a></code></p></div></div><h3 id="g:6">Fun&#231;&#245;es de compress&#227;o de jogadores</h3><div class="top"><p class="src"><a id="v:comprime_jogadores" class="def">comprime_jogadores</a> :: [<a href="LI11819.html#t:Jogador">Jogador</a>] -&gt; String <a href="#v:comprime_jogadores" class="selflink">#</a></p><div class="doc"><p>A informa&#231;&#227;o de cada jogador ser&#225; comprimida em dois caracteres:</p><ul><li>O primeiro cont&#233;m  a <code><a href="LI11819.html#v:direcaoJogador">direcaoJogador</a></code>, assim como <code><a href="LI11819.html#v:lasersJogador">lasersJogador</a></code> e <code><a href="LI11819.html#v:choquesJogador">choquesJogador</a></code></li><li>O segundo cont&#233;m a <code><a href="LI11819.html#v:posicaoJogador">posicaoJogador</a></code> e as <code><a href="LI11819.html#v:vidasJogador">vidasJogador</a></code></li></ul><p><strong>Nota</strong>: Para comprimir os tr&#234;s valores num s&#243; caracter ser&#225; usada a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:comprime_tres_valores">comprime_tres_valores</a></code></p><p><strong>Nota</strong>: O primeiro caracter dos dois que comprimem a informna&#231;&#227;o de um jogador ter&#225; 5 d&#237;gitos, o que ajudar&#225; na separa&#231;&#227;o da string, posteriormente.</p></div></div><div class="top"><p class="src"><a id="v:comprime_tres_valores" class="def">comprime_tres_valores</a> <a href="#v:comprime_tres_valores" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>Int correspondente &#224; <code><a href="LI11819.html#t:Direcao">Direcao</a></code> ou <code><a href="LI11819.html#v:vidasJogador">vidasJogador</a></code></p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p><code><a href="LI11819.html#v:lasersJogador">lasersJogador</a></code> ou as linhas das coordenadas</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p><code><a href="LI11819.html#v:choquesJogador">choquesJogador</a></code> ou as colunas das coordenadas</p></td></tr><tr><td class="src">-&gt; Char</td><td class="doc"><p><code>Char</code> que nos seus d&#237;gitos cont&#233;m as infroma&#231;&#245;es dadas</p></td></tr></table></div><div class="doc"><p>Dados tr&#234;s valores devolve um d&#237;gito em que nas dezenas de milhar est&#225; contida uma informa&#231;&#227;o, nas centenas outra e nas unidades outra</p></div></div><h3 id="g:7">Fun&#231;&#245;es de compress&#227;o de disparos</h3><div class="top"><p class="src"><a id="v:comprime_disparos" class="def">comprime_disparos</a> :: [<a href="LI11819.html#t:Disparo">Disparo</a>] -&gt; String <a href="#v:comprime_disparos" class="selflink">#</a></p><div class="doc"><p>Comprime uma lista de disparos em string, o caracter <code><a href="LI11819.html#v:DisparoLaser">DisparoLaser</a></code> ou um <code><a href="LI11819.html#v:DisparoCanhao">DisparoCanhao</a></code> ter&#225; 6 digitos enquanto o <code><a href="LI11819.html#v:DisparoChoque">DisparoChoque</a></code> ter&#225; 3</p><ul><li>No caso do Canhao e do Laser</li></ul><pre>\kxyyzz</pre><p><strong>k</strong>:   numero dado pela fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:passa_jogador_disparo_int">passa_jogador_disparo_int</a></code> que indica qual o jogador que disparou assim como o tipo de disparo</p><p><strong>x</strong>:  n&#250;mero correspondente &#224; dire&#231;&#227;o dado por <code><a href="Tarefa3_2018li1g088.html#v:passa_direcao_int">passa_direcao_int</a></code></p><p><strong>yyxx</strong>: y  coordenadas do disparo</p><ul><li>No caso do Choque</li></ul><pre>\xy</pre><p><strong>x</strong>: numero do jogador</p><p><strong>y</strong>:  n&#250;mero de ticks</p></div></div><h4 id="g:8">Fun&#231;&#245;es auxiliares &#224; compress&#227;o de disparos</h4><div class="top"><p class="src"><a id="v:junta_disparo_string" class="def">junta_disparo_string</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; String <a href="#v:junta_disparo_string" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que far&#225; a transcri&#231;&#227;o de um disparo para um caracter</p><p><strong>Nota:</strong> Usar&#225; a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:passa_jogador_disparo_int">passa_jogador_disparo_int</a></code> e a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:passa_direcao_int">passa_direcao_int</a></code>  </p></div></div><div class="top"><p class="src"><a id="v:passa_jogador_disparo_int" class="def">passa_jogador_disparo_int</a> :: <a href="LI11819.html#t:Disparo">Disparo</a> -&gt; Int <a href="#v:passa_jogador_disparo_int" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que dado um jogador e um disparo, visto s&#243; haver 2*3=8 possibilidades, comprime-as num s&#243; digito , (as centenas de milhar). que ser&#225; adicionado ao resto da informa&#231;&#227;o para formar um caracter. </p></div></div><div class="top"><p class="src"><a id="v:passa_direcao_int" class="def">passa_direcao_int</a> :: <a href="LI11819.html#t:Direcao">Direcao</a> -&gt; Int <a href="#v:passa_direcao_int" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que dada uma dire&#231;&#227;o  devolve um int correspondente</p></div></div><h2 id="g:9">Fun&#231;&#245;es principais da Tarefa 3 (Descompress&#227;o)</h2><div class="top"><p class="src"><a id="v:descomprime" class="def">descomprime</a> :: String -&gt; <a href="LI11819.html#t:Estado">Estado</a> <a href="#v:descomprime" class="selflink">#</a></p><div class="doc"><p>Descomprime uma <code>String</code> para um 'Estado.</p><p>A descompress&#227;o ser&#225; dividida em tr&#234;s:</p><ul><li><strong>Desompress&#227;o do <code><a href="LI11819.html#t:Mapa">Mapa</a></code></strong>: Ser&#225; usada a fun&#231;&#227;o <code>desccomprime_mapa</code></li><li><strong>Descompress&#227;o dos <code><a href="LI11819.html#t:Jogador">Jogador</a></code>es</strong>: Ser&#225; usada a fun&#231;&#227;o <code>desccomprime_jogadores</code></li><li><strong>Descompress&#227;o dos <code><a href="LI11819.html#t:Disparo">Disparo</a></code>s</strong>: Ser&#225; usada a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:descomprime_disparos">descomprime_disparos</a></code></li></ul><p><strong>Nota</strong>:  A String ser&#225; partida nas 3 string correspondentes a cada componente do estado usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:parte_string">parte_string</a></code> duas vezes. A primeira para separar a string correspondente ao mapa do resto, a segunda vez para separar a string dos jogadores da dos disparos </p></div></div><h3 id="g:10">Fun&#231;&#245;es auxiliares &#224; separa&#231;&#227;o de strings</h3><div class="top"><p class="src"><a id="v:parte_string" class="def">parte_string</a> :: String -&gt; (String, String) <a href="#v:parte_string" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que separa a string do mapa da restante</p><p>Como sabemos que todos os caracteres da string que comprime o mapa t&#234;m 6 digitos e que o primeiro caracter do jogador ter&#225; 5, podemos separar a string ao encontrar um caracter com 5 d&#237;gitos, ficando assim com uma string correspondente &#224;o mapa e outra correspondente a toda a infroma&#231;&#227;o restante (jogadores e disparos).</p></div></div><div class="top"><p class="src"><a id="v:parte_string_jogadores_disparos" class="def">parte_string_jogadores_disparos</a> :: Char -&gt; String -&gt; (String, String) <a href="#v:parte_string_jogadores_disparos" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que separa a string dos jogadores da dos disparos</p><p>O primeiro caracter da string que corresponde ao estado comprimido cont&#233;m, no d&#237;gito das centenas de milhar, o n&#250;mero de Jogadores existentes no estado.</p><p>Sendo assim, e sabendo que a informa&#231;&#227;o de cada jogador se encontra em dois caracteres, basta retirar &#224; string que corresponde aos jogadores e disparos (resultante da fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:parte_string">parte_string</a></code>) x caracteres, em que x corresponde ao dobro dos jogadores do Estado.</p><p>A Fun&#231;&#227;o devolve assim a string separada em duas, usando o take e o drop, em que a primeira ser&#225; a string dos jogadores e a segunda a string dos disparos.</p></div></div><h3 id="g:11">Fun&#231;&#245;es de  descompress&#227;o do mapa</h3><div class="top"><p class="src"><a id="v:descomprime_mapa" class="def">descomprime_mapa</a> :: String -&gt; <a href="LI11819.html#t:Mapa">Mapa</a> <a href="#v:descomprime_mapa" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que re&#250;ne todas as outras fun&#231;&#245;es de descompila&#231;&#227;o do mapa e que faz a ponte entre todas elas</p><p><strong>Nota:</strong> O primeiro caracter da string cont&#233;m informa&#231;&#227;o sobre as dimens&#245;es do mapa e o n&#250;mero de jogadores e como tal &#233; ignorado na descompress&#227;o das pe&#231;as.</p><p><strong>Passos da descompress&#227;o</strong>:</p><ol><li>Reverter a simplifica&#231;&#227;o dos caracteres, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:reverte_simplificacao">reverte_simplificacao</a></code>
    <strong>EX:</strong> \ 400007 passa a \ 100007 \ 200001</li><li>Converter essa string de caracteres em pe&#231;as, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:converte_string_pecas">converte_string_pecas</a></code>, tendo, como resultado, uma lista de Pe&#231;as</li><li>Retirar, do primeiro caracter da string, as dimens&#245;es do mapa, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:string_para_dimensoes">string_para_dimensoes</a></code></li><li>Tendo as dimens&#245;es do mapa e tendo uma lista de pe&#231;as, reconstroi-se o mapa sem bordas, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:separa_lista_pecas">separa_lista_pecas</a></code></li><li>Por fim, adicionam-se as bordas ao mapa, usando a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:reconstroi_mapa">reconstroi_mapa</a></code></li></ol></div></div><h4 id="g:12">Fun&#231;&#245;es de aux&#237;lio &#224; descompress&#227;o do mapas</h4><div class="top"><p class="src"><a id="v:reconstroi_mapa" class="def">reconstroi_mapa</a> :: [[<a href="LI11819.html#t:Peca">Peca</a>]] -&gt; <a href="LI11819.html#t:Mapa">Mapa</a> <a href="#v:reconstroi_mapa" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o a que &#233; fornecido o resultado da fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:separa_lista_pecas">separa_lista_pecas</a></code>, que ser&#225; o equivalente &#224; matriz sem bordas e adiciona-lhe as bordas, para que a matriz do mapa fique completa</p></div></div><div class="top"><p class="src"><a id="v:reverte_simplificacao" class="def">reverte_simplificacao</a> :: [Char] -&gt; String <a href="#v:reverte_simplificacao" class="selflink">#</a></p><div class="doc"><p>Reverte a simplifica&#231;&#227;o feita pela fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:melhora_string_pecas">melhora_string_pecas</a></code></p><pre>'\400055' = &quot;\100055\200001&quot;</pre></div></div><div class="top"><p class="src"><a id="v:separa_lista_pecas" class="def">separa_lista_pecas</a> :: <a href="LI11819.html#t:Posicao">Posicao</a> -&gt; [<a href="LI11819.html#t:Peca">Peca</a>] -&gt; [[<a href="LI11819.html#t:Peca">Peca</a>]] <a href="#v:separa_lista_pecas" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que, dadas as dimens&#245;es do mapa, parte uma lista de pe&#231;as em v&#225;rias listas com as dimens&#245;es corretas, devolvendo a matriz do mapa sem as bordas</p></div></div><div class="top"><p class="src"><a id="v:string_para_dimensoes" class="def">string_para_dimensoes</a> :: String -&gt; <a href="LI11819.html#t:Posicao">Posicao</a> <a href="#v:string_para_dimensoes" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que retorna a dimens&#227;o do mapa, que est&#225; codificada nos primeiros 4 d&#237;gitos do primeiro caracter</p><pre>'\205439' = (54,39)</pre></div></div><div class="top"><p class="src"><a id="v:converte_string_pecas" class="def">converte_string_pecas</a> :: String -&gt; [<a href="LI11819.html#t:Peca">Peca</a>] <a href="#v:converte_string_pecas" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que passar&#225; a string para uma lista de pe&#231;as</p><p><strong>Nota:</strong> Utiliza a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:converte_char_peca">converte_char_peca</a></code> para processar cada caracter</p></div></div><div class="top"><p class="src"><a id="v:converte_char_peca" class="def">converte_char_peca</a> :: Char -&gt; [<a href="LI11819.html#t:Peca">Peca</a>] <a href="#v:converte_char_peca" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que passa um caracter para a lista de pe&#231;as correspondente</p><pre>'\200002' = [Bloco Indestrutivel, Bloco Indestrutivel]</pre></div></div><div class="top"><p class="src"><a id="v:passa_int_parede" class="def">passa_int_parede</a> :: Int -&gt; <a href="LI11819.html#t:Peca">Peca</a> <a href="#v:passa_int_parede" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que, quando lhe &#233; dado o 6&#186; digito de um caracter, retorna que pe&#231;a esse digito significava</p></div></div><h3 id="g:13">Fun&#231;&#245;es de descompress&#227;o de jogadores</h3><div class="top"><p class="src"><a id="v:descomprime_jogadores" class="def">descomprime_jogadores</a> :: String -&gt; [<a href="LI11819.html#t:Jogador">Jogador</a>] <a href="#v:descomprime_jogadores" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que descomprime a informa&#231;&#227;o relativa aos jogadores</p><p><strong>Nota:</strong> Em cada um dos dois caracteres que codificam um jogador, h&#225; tr&#234;s informa&#231;&#245;es, que a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:descomprime_tres_valores">descomprime_tres_valores</a></code> ir&#225; fornecer a esta fun&#231;&#227;o</p><pre>\20304\20201 = (Jogador (2,1) D 2 3 4 )</pre></div></div><div class="top"><p class="src"><a id="v:descomprime_tres_valores" class="def">descomprime_tres_valores</a> :: Char -&gt; (Int, Int, Int) <a href="#v:descomprime_tres_valores" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que de um caracter retirar&#225; tr&#234;s informa&#231;&#245;es relativas a um jogador</p><p>Ir&#225; fazendo isto, passsando o caracter par aum valor num&#233;rico, usando a fun&#231;&#227;o ord, e ,a partir da&#237;, vai dividindo-o sucessivamente para retirar certas partes do n&#250;mero</p></div></div><h3 id="g:14">Fun&#231;&#245;es de descompress&#227;o de disparos</h3><div class="top"><p class="src"><a id="v:descomprime_disparos" class="def">descomprime_disparos</a> :: String -&gt; [<a href="LI11819.html#t:Disparo">Disparo</a>] <a href="#v:descomprime_disparos" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que verifica se o caracter est&#225; a conter informa&#231;&#227;o sobre um laser/canh&#227;o ousobre um choque e que age de acordo</p><p><strong>Nota:</strong> Um caracter que codifique um canhao/laser ter&#225; mais de 3 d&#237;gitos, oq eu n&#227;o se verifica para um choque que s&#243; cont&#233;m duas infroma&#231;&#245;es</p></div></div><div class="top"><p class="src"><a id="v:descomprime_disparo" class="def">descomprime_disparo</a> :: Char -&gt; <a href="LI11819.html#t:Disparo">Disparo</a> <a href="#v:descomprime_disparo" class="selflink">#</a></p><div class="doc"><p>Os disparos de canh&#227;o t&#234;m uma identifica&#231;&#227;o em que o sexto d&#237;gito &#233; 4 enquanto um laser tem um n&#250;mero igual a 5, logo a fun&#231;&#227;o interpretar&#225; o caracter consoante esse n&#250;mero</p><p><strong>Nota:</strong> Chama a fun&#231;&#227;o <code><a href="Tarefa3_2018li1g088.html#v:retorna_info">retorna_info</a></code></p></div></div><div class="top"><p class="src"><a id="v:retorna_info" class="def">retorna_info</a> :: Char -&gt; (Int, <a href="LI11819.html#t:Direcao">Direcao</a>, Int, Int) <a href="#v:retorna_info" class="selflink">#</a></p><div class="doc"><p>Dado um caracter, retira informa&#231;&#227;o relativa ao jogador que disparou, a dire&#231;&#227;o e as coordenadas</p><p>Assim como na <code><a href="Tarefa3_2018li1g088.html#v:descomprime_tres_valores">descomprime_tres_valores</a></code>, tamb&#233;m esta fun&#231;&#227;o usar&#225; as propriedades n&#250;mericas do caracter ap&#243;s ter sido passado para numero</p></div></div><div class="top"><p class="src"><a id="v:passa_int_direcao" class="def">passa_int_direcao</a> :: Int -&gt; <a href="LI11819.html#t:Direcao">Direcao</a> <a href="#v:passa_int_direcao" class="selflink">#</a></p><div class="doc"><p>Passa um inteiro para a dire&#231;&#227;o que estava a codificar</p></div></div><div class="top"><p class="src"><a id="v:passa_jogador_disparo" class="def">passa_jogador_disparo</a> :: Int -&gt; Int <a href="#v:passa_jogador_disparo" class="selflink">#</a></p><div class="doc"><p>Passa um inteiro para o inteiro correspondente ao jogador que est&#225; a simbolizar</p><p><strong>Nota</strong>: Os valores v&#227;o de 1 a 8 porque, quando se fez a compress&#227;o dos disparos, convencionou-se que os jogadores de 0-3 que disparassem Canhoes ficariam com os n&#250;meros 1-4 e os jogadores que disparassem Lasers ficariam com 5-8</p></div></div><h1 id="g:15">Discuss&#227;o e conclus&#227;o</h1><div class="top"><p class="src"><a id="v:conclusao" class="def">conclusao</a> :: String <a href="#v:conclusao" class="selflink">#</a></p><div class="doc"><p>Certamente foi uma tarefa interessante, obrigando o aluno o aluno tanto a escrever c&#243;digo efetivo e de qualidade como a esfor&#231;ar-se para encontrar solu&#231;&#245;es originais.</p><p>O esfor&#231;o, assim como a criatividade nos m&#233;todos de compress&#227;o, culminaram numa taxa de compress&#227;o m&#233;dia de 98,90%</p><p>Em retrospetiva, julgamos os resultados obtidos bastante satisfat&#243;rios.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>